<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Ruby Critic - Home</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- StyleSheets -->
    <link href="../assets/vendor/stylesheets/bootstrap.min.css" media="screen, projection, print" rel="stylesheet" type="text/css">
    <link href="../assets/vendor/stylesheets/font-awesome.min.css" media="screen, projection, print" rel="stylesheet" type="text/css">
    <link href="../assets/vendor/stylesheets/prettify.custom_theme.css" media="screen, projection, print" rel="stylesheet" type="text/css">
    <link href="../assets/stylesheets/application.css" media="screen, projection, print" rel="stylesheet" type="text/css">
  </head>

  <body>
    <header class="navbar navbar-default navbar-fixed-top">
      <a href="#menu-toggle" class="btn btn-default hidden-lg visible-sm-* hidden-md visible-xs-* pull-left" id="menu-toggle"><i class="fa fa-bars" aria-hidden="true"></i></a>
      <a href="../overview.html"><img src="../assets/images/logo.png" alt="Ruby Critic Logo" title="Ruby Critic Logo" width="55"><span class="logo">RUBYCRITIC</span></a>
      
    </header>
    <div id="wrapper">
      <!-- Sidebar -->
      <aside id="sidebar-wrapper">
        <ul class="sidebar-nav">
          <li class="sidebar-item">
            <a href="../overview.html" class="project-nav-item overview-nav"><i class="fa fa-dashboard"></i>Overview</a>
          </li>
          <li class="sidebar-item">
            <a href="../code_index.html" class="project-nav-item code-index-nav"><i class="fa fa-code"></i>Code</a>
          </li>
          <li class="sidebar-item">
            <a href="../smells_index.html" class="project-nav-item smells-index-nav"><i class="fa fa-warning"></i>Smells</a>
          </li>
          <li class="sidebar-item">
            <a href="../simple_cov_index.html" class="project-nav-item coverage-index-nav"><i class="fa fa-umbrella"></i>Coverage</a>
          </li>
        </ul>
      </aside>
      <!-- /#sidebar-wrapper -->
      <div id="page-content-wrapper">
        <div class="container-fluid">
          <div class="row">
  <!--Page Title -->
  <div class="Page_Title">
    <div class="file-time">
      <span class="committed-at">
        
          Updated <time class='js-timeago' datetime='2022-04-10 21:34:16 +0600'>2022-04-10 21:34:16 +0600</time>
        
      </span>
    </div>
    <div>
      <h3><small>built-in-datatypes /</small> built_in_datatypes.rb</h3>
    </div>
  </div>
  <!--End Page Title -->
  <div class="Content_Wrapper">
    <!-- code detail -->
    <div class="code-top-detail clearfix row">
      <div class="col-md-8">
        <div class="row">
          <div class="col-md-1">
            <div class="rating f big">
              F
            </div>
          </div>
          <div class="code-statistics col-md-11">
            <div class="col-md-3">
              <div><span class="metric">170</span><small> lines of codes</small></div>
              <div><span class="metric">6</span><small> methods</small></div>
            </div>
            <div class="col-md-3">
              <div><span class="metric">4.8</span><small> complexity/method</small></div>
              <div><span class="metric">23</span><small> churn</small></div>
            </div>
            <div class="col-md-3">
              <div><span class="metric">28.77</span><small> complexity</small></div>
              <div><span class="metric">114</span><small> duplications</small></div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="code-tabs">
          <ul class="nav nav-pills right-to-left">
            <li><a href="#" id="toggle-code" class="toggle-button button">code</a></li>
            <li class="active">
              <a href="#" id="toggle-smells" class="toggle-button button">
                1
                smell
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>

    <code class="prettyprint linenums lang-ruby file-code js-file-code">#!/usr/bin/env ruby
# frozen_string_literal: true

# to finish `time`

require &quot;nokogiri&quot;
require &quot;optparse&quot;
require &quot;optparse/time&quot;
require &quot;paint&quot;
# require &#39;pp&#39;

# Custom OptionParser class
class Parser<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden="true"></i>          <a href="http://docs.seattlerb.org/flay/" target="_blank"><b>DuplicateCode</b></a>        </span>      </div>      <span>Similar code found in 4 nodes</span>              <span>Locations:</span>                  <a href="built_in_datatypes.html#L13" class="js-smell-location">0</a>                  <a href="../ruby-eclipse-cheatsheets-to-dita/ruby-cheatsheets-to-dita.html#L14" class="js-smell-location">1</a>                  <a href="../ruby-strip/ruby-strip.html#L13" class="js-smell-location">2</a>                  <a href="../well-formed/well_formed.html#L13" class="js-smell-location">3</a>                  </div>  </li></ol>
  VERSION = &quot;1.0.0&quot;

  # Custom OptionParser ScriptOptions
  class ScriptOptions
    attr_accessor :path, :delay, :time

    def define_options(parser)
      parser.banner = &quot;Usage: #{Paint[&#39;built_in_datatypes.rb&#39;, :red, :white]}&quot;
      parser.separator &quot;&quot;
      parser.separator &quot;Specific options:&quot;

      # add additional options
      specify_path_option(parser)
      delay_execution_option(parser)
      execute_at_time_option(parser)

      parser.separator &quot;&quot;
      parser.separator &quot;Common options:&quot;
      # No argument, shows at tail.  This will print an options summary.
      # Try it and see!
      parser.on_tail(&quot;-h&quot;, &quot;--help&quot;, &quot;Show this message&quot;) do
        puts parser
        exit
      end
      # Another typical switch to print the version.
      parser.on_tail(&quot;--version&quot;, &quot;Show version&quot;) do
        puts VERSION
        exit
      end
    end

    def specify_path_option(parser)
      parser.on(&quot;-p&quot;, &quot;--path path&quot;, &quot;Path to schema&quot;) { |p| self.path = p }
    end

    def delay_execution_option(parser)
      # Cast &#39;delay&#39; argument to a Float.
      parser.on(&quot;--delay N&quot;, Float, &quot;Delay N seconds before executing&quot;) do |n|
        self.delay = n
      end
    end

    def execute_at_time_option(parser)
      # Cast &#39;time&#39; argument to a Time object.
      parser.on(
        &quot;-t&quot;,
        &quot;--time [TIME]&quot;,
        Time,
        &quot;Begin execution at given time&quot;
      ) { |time| self.time = time }
    end
  end

  #
  # Return a structure describing the options.
  #
  def parse(args)
    # The options specified on the command line will be collected in
    # *options*.

    @options = ScriptOptions.new
    @args =
      OptionParser.new do |parser|
        @options.define_options(parser)
        parser.parse!(args)
      end
    @options
  end

  attr_reader :parser, :options
end

example = Parser.new
options = example.parse(ARGV)
# pp options # example.options
# pp ARGV

sleep(options.delay) if options.delay
if options.path.nil?
  print &quot;Enter the path to the schema: &quot;
  options.path = $stdin.gets.chomp
end

def create_path(path)
  path.tr(&quot;\\&quot;, &quot;/&quot;)
end

@error = 0
@allowed = %w[
  string
  boolean
  base64Binary
  hexBinary
  float
  decimal
  double
  anyURI
  QName
  NOTATION
  duration
  dateTime
  time
  date
  gYearMonth
  gYear
  gMonthDay
  gDay
  gMonth
  normalizedString
  integer
  token
  nonPositiveInteger
  long
  nonNegativeInteger
  language
  Name
  NMTOKEN
  negativeInteger
  int
  unsignedLong
  positiveInteger
  NCName
  NMTOKENS
  short
  unsignedInt
  ID
  IDREF
  ENTITY
  byte
  unsignedShort
  IDREFS
  ENTITIES
  unsignedByte
]

# start
project_path = create_path(options.path)
@datatypes = []

Dir.glob(&quot;#{project_path}/**/*.xsd&quot;).map do |schema|
  doc = Nokogiri.XML(File.open(schema))
  doc.xpath(&#39;//*[starts-with(@type,&quot;xs:&quot;)]&#39;).map do |tag|
    type = tag.attribute(&quot;type&quot;).to_s.split(&quot;:&quot;).last
    next if @datatypes.include?(type)

    @datatypes &lt;&lt; type
  end
end

@datatypes.map do |type|
  next if @allowed.include?(type)

  @error = 1
  puts &quot;#{type} does not match any built in XML Schema datatype&quot;
end

exit 1 unless @error.zero?
</code>
  </div>
</div>

        </div>
      </div>
    </div>

    <!-- JavaScripts -->
    <script src="../assets/vendor/javascripts/jquery.min.js"></script>
    <script src="../assets/vendor/javascripts/jquery.tablesorter.min.js"></script>
    <script src="../assets/vendor/javascripts/jquery.scrollTo.min.js"></script>
    <script src="../assets/vendor/javascripts/jquery.timeago.js"></script>
    <script src="../assets/vendor/javascripts/highcharts.src-4.0.1.js"></script>
    <script src="../assets/vendor/javascripts/prettify.js"></script>
    <script src="../assets/vendor/javascripts/bootstrap.min.js"></script>
    <script src="../assets/javascripts/application.js"></script>
    <script src="../assets/vendor/javascripts/jquery.filtertable.min.js"></script>
  </body>
</html>
